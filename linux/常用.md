## docker

* docker安装

```bash
curl -sSL https://get.docker.com/ | CHANNEL=stable sh
curl -fsSL https://get.docker.com | bash -s docker --mirror Aliyun
curl -sSL https://get.daocloud.io/docker | sh
```

* 添加docker用户组

```bash
sudo usermod -a -G docker $USER
```

* docker添加国内镜像

```bash
sudo mkdir -p /etc/docker
sudo tee /etc/docker/daemon.json <<-'EOF'
{
    "registry-mirrors": [
        "https://docker.m.daocloud.io",
        "https://dockerproxy.com",
        "https://docker.nju.edu.cn"
    ]
}
EOF
sudo systemctl daemon-reload
sudo systemctl restart docker
```
参考: https://gist.github.com/y0ngb1n/7e8f16af3242c7815e7ca2f0833d3ea6

* portainer安装

```bash
docker volume create portainer_data
docker run -d -p 8000:8000 -p 9443:9443 --name portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:2.17.1
```

* 清空null镜像

```bash
docker image prune -f
```

* docker-proxy端口占用无法重启

```
[root@localhost ~]# ps -ef | grep docker-proxy
root      1329   987  0 11:56 ?        00:00:00 [docker-proxy] <defunct>
root      1333   987  0 11:56 ?        00:00:00 [docker-proxy] <defunct>
root      1345   987  0 11:56 ?        00:00:00 [docker-proxy] <defunct>
root      1349   987  0 11:56 ?        00:00:00 [docker-proxy] <defunct>
root      6820  1764  0 12:38 pts/0    00:00:00 grep --color=auto docker-proxy

systemctl restart docker
```

## linux
 
### ubuntu/centos 换源脚本

```bash
bash <(curl -sSL https://gitee.com/SuperManito/LinuxMirrors/raw/main/ChangeMirrors.sh)
```


### setting proxy

```bash
export http_proxy=http://192.168.0.1:10809
export https_proxy=http://192.168.0.1:10809
unset http_proxy
unset https_proxy
```

### setting static address

```bash
nano /etc/sysconfig/network-scripts/ifcfg-enp0s3 #enp0s3为网卡名

BOOTPROTO="static"        #dhcp改为static

DNS1=192.168.0.1          #NDS
IPADDR=192.168.0.171      #IP地址
GATEWAY=192.168.0.1       #网关
PREFIX=24

修改后重启网络
```

### restart network

```bash
# centos7
sudo systemctl restart network
# rocky8
sudo systemctl restart NetworkManager
```

### 时间同步

```bash

# 1.安装ntp
yum install ntp

# 2.修改文件
nano /etc/ntp.conf
# new(新增)
server ntp1.aliyun.com prefer #prefer:优先使用该时间服务器
server ntp2.aliyun.com

# old(原有)
server 0.centos.pool.ntp.org iburst #iburst:当一个运程NTP服务器不可用时，向它发送一系列的并发包进行检测
server 1.centos.pool.ntp.org iburst
server 2.centos.pool.ntp.org iburst
server 3.centos.pool.ntp.org iburst

# 3.查看时区
timedatectl status

# 4.设置时区
timedatectl set-timezone Asia/Shanghai
# 或者
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

# 5.时间同步
ntpdate ntp1.aliyun.com

# 6.启动ntp
systemctl start ntpd

# 7.开机启动
systemctl enable ntpd
```

### 修改主机名
```bash
hostnamectl set-hostname 主机名
```

### install nodejs
```bash
curl -sL https://deb.nodesource.com/setup_14.x | sudo bash
npm config set registry https://registry.npm.taobao.org 
npm config get registry
```

### install java
```bash
wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | sudo apt-key add -
sudo add-apt-repository --yes https://mirrors.tuna.tsinghua.edu.cn/AdoptOpenJDK/deb
sudo apt-get update
```

### multipass
```bash
multipass launch -n herouu -c 2 -d 50G -m 3G 20.04
```


## window

### scoop安装 
```bash
Set-ExecutionPolicy RemoteSigned -scope CurrentUser

$env:SCOOP='D:\Applications\Scoop'
[Environment]::SetEnvironmentVariable('SCOOP', $env:SCOOP, 'User')

Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh')
# or shorter
iwr -useb get.scoop.sh | iex
```

### cmd代理
```bash
set http_proxy=http://127.0.0.1:10809
set https_proxy=http://127.0.0.1:10809
```
### powershell代理
```bash
$env:HTTP_PROXY="http://127.0.0.1:10809"
$env:HTTPS_PROXY="http://127.0.0.1:10809"
```

## 常用镜像源

### maven 

```
<mirror>
    <id>aliyunmaven</id>
    <mirrorOf>*</mirrorOf>
    <name>阿里云公共仓库</name>
    <url>https://maven.aliyun.com/repository/public</url>
</mirror>
```

### github地址解析

```
199.232.4.133 raw.githubusercontent.com
140.82.113.4 github.com
```

### 有用的镜像

- v2rayA(https://v2raya.org/)
- serjs/go-socks5-proxy(https://github.com/serjs/socks5-server)
- v2rayPi(https://github.com/twotreesus/V2RayPi)
- calibre-web(https://hub.docker.com/r/johngong/calibre-web)
```bash
docker run -d \
 --name=calibre-web \
 -p 8083:8083 \
 -v /home/herouu/data/calibre/config:/config \
 -v /home/herouu/data/calibre/library:/library \
 johngong/calibre-web:latest
```
## 其他工具

* Doks(https://getdoks.org/) 文档生成工具,类似hugo,hexo