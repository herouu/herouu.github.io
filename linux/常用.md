## linux

### ubuntu/centos 换源脚本

```bash
bash <(curl -sSL https://linuxmirrors.cn/main.sh)
```

### setting proxy

```bash
export http_proxy=http://192.168.0.1:10809
export https_proxy=http://192.168.0.1:10809
unset http_proxy
unset https_proxy
```

### setting static address

```bash
nano /etc/sysconfig/network-scripts/ifcfg-enp0s3 #enp0s3为网卡名

BOOTPROTO="static"        #dhcp改为static

DNS1=192.168.0.1          #NDS
IPADDR=192.168.0.171      #IP地址
GATEWAY=192.168.0.1       #网关
PREFIX=24

修改后重启网络
```

```bash
# 连接wifi
nmcli dev wifi
nmcli dev wifi connect <SSID>  password <password>
# 修改静态ip
nmcli connection modify <SSID> ipv4.method manual ipv4.addresses 192.168.0.250/24 ipv4.gateway 192.168.0.1 ipv4.dns 192.168.0.1 connection.autoconnect yes
# 添加dns
nmcli con mod <SSID> +ipv4.dns 114.114.114.114
# 重启网络
nmcli conn up <SSID>
```

### 重启网卡

```
 ip link set wlp5s0 down
 ip link set wlp5s0 up
```

#### error and fix

* SIOCSIFFLAGS: Operation not possible due to RF-kill

```
rfkill list
rfkill unblock all
```

### restart network

```bash
# centos7
sudo systemctl restart NetworkManager
```

### 时间同步

```bash

# 1.安装ntp
yum install ntp

# 2.修改文件
nano /etc/ntp.conf
# new(新增)
server ntp1.aliyun.com prefer #prefer:优先使用该时间服务器
server ntp2.aliyun.com

# old(原有)
server 0.centos.pool.ntp.org iburst #iburst:当一个运程NTP服务器不可用时，向它发送一系列的并发包进行检测
server 1.centos.pool.ntp.org iburst
server 2.centos.pool.ntp.org iburst
server 3.centos.pool.ntp.org iburst

# 3.查看时区
timedatectl status

# 4.设置时区
timedatectl set-timezone Asia/Shanghai
# 或者
cp /usr/share/zoneinfo/Asia/Shanghai /etc/localtime

# 5.时间同步
ntpdate ntp1.aliyun.com

# 6.启动ntp
systemctl start ntpd

# 7.开机启动
systemctl enable ntpd
```

### 修改主机名

```bash
hostnamectl set-hostname 主机名
```

### 

```
# 显示包括子目录在内的最大文件及文件夹
 du -Sh | sort -rh | head -5
# 显示文件夹 
 du -h | sort -rh  | head -5
 
 du --max-depth=1 -h / | sort -rh  | head -5
```

### install nodejs

```bash
curl -sL https://deb.nodesource.com/setup_14.x | sudo bash
npm config set registry https://registry.npm.taobao.org 
npm config get registry
```

### install java

```bash
wget -qO - https://adoptopenjdk.jfrog.io/adoptopenjdk/api/gpg/key/public | sudo apt-key add -
sudo add-apt-repository --yes https://mirrors.tuna.tsinghua.edu.cn/AdoptOpenJDK/deb
sudo apt-get update
```

### multipass

```bash
multipass launch -n herouu -c 2 -d 50G -m 3G 20.04
```

### linux磁盘扩容

```
fdisk -l
fdisk /dev/vdb

pvcreate /dev/sdb1
vgdisplay

vgextend centos /dev/sdb1
lvextend -L +100G /dev/mapper/centos-root

xfs_growfs /dev/mapper/centos-root
df -lh
```
参考 https://www.cnblogs.com/lvzhenjiang/p/15887422.html

### centos7升级rockylinux8

https://blog.csdn.net/qq_44379042/article/details/130981771

```
应答  /var/log/leapp/answerfile
leapp answer --section remove_pam_pkcs11_module_check.confirm=True
```

## window

### cmd代理

```bash
set http_proxy=http://127.0.0.1:10809
set https_proxy=http://127.0.0.1:10809
```

### powershell代理

```bash
$env:HTTP_PROXY="http://127.0.0.1:10809"
$env:HTTPS_PROXY="http://127.0.0.1:10809"
```

## 常用镜像源

### maven

```
<mirror>
    <id>aliyunmaven</id>
    <mirrorOf>*</mirrorOf>
    <name>阿里云公共仓库</name>
    <url>https://maven.aliyun.com/repository/public</url>
</mirror>
```

### PyPI换源

```
pip config set global.extra-index-url "https://mirrors.tuna.tsinghua.edu.cn/pypi/web/simple"

```

### github地址解析

```
199.232.4.133 raw.githubusercontent.com
140.82.113.4 github.com
```

## 其他工具

### 文档

* Doks(<https://getdoks.org/>) hugo模板

### 压测

* jmeter
* httprunner(<https://httprunner.com/>)
* locust(<https://github.com/locustio/locust>)
* tsung(<https://github.com/processone/tsung>)
* go-stress-testing(<https://github.com/link1st/go-stress-testing>)

### scoop

#### scoop安装

```bash
Set-ExecutionPolicy RemoteSigned -scope CurrentUser

$env:SCOOP='D:\Applications\Scoop'
[Environment]::SetEnvironmentVariable('SCOOP', $env:SCOOP, 'User')

Invoke-Expression (New-Object System.Net.WebClient).DownloadString('https://get.scoop.sh')
# or shorter
iwr -useb get.scoop.sh | iex
```

```
# install
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
$env:SCOOP='D:\Applications\Scoop'
[Environment]::SetEnvironmentVariable('SCOOP', $env:SCOOP, 'User')
# irm -useb get.scoop.sh | iex
irm https://ghproxy.com/raw.githubusercontent.com/lzwme/scoop-proxy-cn/master/install.ps1 | iex

# config
scoop config SCOOP_REPO https://ghproxy.com/github.com/ScoopInstaller/Scoop
scoop bucket rm main
scoop bucket add main https://ghproxy.com/github.com/ScoopInstaller/Main
scoop bucket add spc https://ghproxy.com/https://github.com/lzwme/scoop-proxy-cn

# show help
scoop help

# install 7zip、aria2、scoop-search...
scoop install spc/7zip spc/aria2 spc/scoop-search
```


#### bucket自定义

* Scoop bucket(<https://ericzong.github.io/posts/tool-scoop-bucket.html>)


#### pm2

```
npm -g install pm2

pm2 start "命令脚本" --name 名称

pm2 startup
即在/etc/init.d/目录下生成pm2-root的启动脚本，且自动将pm2-root设为服务。
可替代nohup命令

pm2 save
会将当前pm2所运行的应用保存在/root/.pm2/dump.pm2下，当开机重启时，运行pm2-root服务脚本，并且到/root/.pm2/dump.pm2下读取应用并启动

```

#### fnm

```
scoop install fnm

国内安装源

设置 https://mirrors.ustc.edu.cn/node/
```

#### tailscale自建节点

https://icloudnative.io/posts/custom-derp-servers/#%E4%BD%BF%E7%94%A8%E7%BA%AF-ip
